[
 {
 "start": 1526915703274,
 "tier": "2467-359",
 "children": [
 {
 "start": 1526915703284,
 "tier": "2467-359",
 "children": []
 },
 {
 "start": 1526915703605,
 "tier": "2467-359-7565-2166",
 "children": [
 {
 "start": 1526915703622,
 "tier": "2467-359-7565-2166",
 "children": []
 },
 {
 "start": 1526915703622,
 "tier": "2467-359-7565-2166-7060",
 "children": [
 {
 "start": 1526915703627,
 "tier": "2467-359-7565-2166-7060",
 "children": []
 }
 ]
 },
 {
 "start": 1526915703636,
 "tier": "2467-359-7565-2166-4115-9714",
 "children": [
 {
 "start": 1526915703639,
 "tier": "2467-359-7565-2166-4115-9714",
 "children": []
 }
 ]
 },
 {
 "start": 1526915703646,
 "tier": "2467-359-7565-2166-9957",
 "children": [
 {
 "start": 1526915703649,
 "tier": "2467-359-7565-2166-9957",
 "children": []
 }
 ]
 },
 {
 "start": 1526915703654,
 "tier": "2467-359-7565-2166-5841-8878-6828-331-891",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704002,
 "tier": "2467-359-5535-7908",
 "children": [
 {
 "start": 1526915704012,
 "tier": "2467-359-5535-7908",
 "children": []
 },
 {
 "start": 1526915704012,
 "tier": "2467-359-5535-7908-8698-8015",
 "children": [
 {
 "start": 1526915704015,
 "tier": "2467-359-5535-7908-8698-8015",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704020,
 "tier": "2467-359-5535-7908-6050",
 "children": [
 {
 "start": 1526915704023,
 "tier": "2467-359-5535-7908-6050",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704027,
 "tier": "2467-359-5535-7908-7433-2399-2022-2521-9714",
 "children": []
 },
 {
 "start": 1526915704262,
 "tier": "2467-359-5535-7908-7433-1051-9295-7181-1127",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704056,
 "tier": "2467-359-5619",
 "children": [
 {
 "start": 1526915704059,
 "tier": "2467-359-5619",
 "children": []
 },
 {
 "start": 1526915704059,
 "tier": "2467-359-5619-9008-1828",
 "children": [
 {
 "start": 1526915704061,
 "tier": "2467-359-5619-9008-1828",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704068,
 "tier": "2467-359-5619-4865",
 "children": [
 {
 "start": 1526915704070,
 "tier": "2467-359-5619-4865",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704074,
 "tier": "2467-359-5619-9220-6406-7966-3302-6283",
 "children": []
 }
 ]
 },
 {
 "start": 1526915704333,
 "tier": "2467-359-8650",
 "children": [
 {
 "start": 1526915704335,
 "tier": "2467-359-8650-4715-2674",
 "children": []
 },
 {
 "start": 1526915704371,
 "tier": "2467-359-8650-4715-9868",
 "children": []
 }
 ]
 },
 {
 "start": 1526915706954,
 "tier": "2467-359-9184",
 "children": [
 {
 "start": 1526915706954,
 "tier": "2467-359-9184-6556-600",
 "children": []
 }
 ]
 },
 {
 "start": 1526915706989,
 "tier": "2467-359-5608",
 "children": [
 {
 "start": 1526915706990,
 "tier": "2467-359-5608-5283-6691",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707071,
 "tier": "2467-359-6258-3255-2029",
 "children": [
 {
 "start": 1526915707075,
 "tier": "2467-359-6258-3255-2029",
 "children": []
 },
 {
 "start": 1526915707075,
 "tier": "2467-359-6258-3255-2029-1066",
 "children": [
 {
 "start": 1526915707078,
 "tier": "2467-359-6258-3255-2029-1066",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707084,
 "tier": "2467-359-6258-3255-2029-6873-8027",
 "children": [
 {
 "start": 1526915707087,
 "tier": "2467-359-6258-3255-2029-6873-8027",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707093,
 "tier": "2467-359-6258-3255-2029-3895",
 "children": [
 {
 "start": 1526915707094,
 "tier": "2467-359-6258-3255-2029-3895",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707099,
 "tier": "2467-359-6258-3255-2029-9052-5366-3265-4284-4204",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707373,
 "tier": "2467-359-5501",
 "children": [
 {
 "start": 1526915707373,
 "tier": "2467-359-5501-8629-5837",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707396,
 "tier": "2467-359-2862",
 "children": [
 {
 "start": 1526915707403,
 "tier": "2467-359-2862",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707425,
 "tier": "2467-359-963-6177",
 "children": [
 {
 "start": 1526915707429,
 "tier": "2467-359-963-6177",
 "children": []
 },
 {
 "start": 1526915707430,
 "tier": "2467-359-963-6177-9585-1987",
 "children": [
 {
 "start": 1526915707435,
 "tier": "2467-359-963-6177-9585-1987",
 "children": []
 },
 {
 "start": 1526915707435,
 "tier": "2467-359-963-6177-9585-1987-1228-8843",
 "children": [
 {
 "start": 1526915707438,
"tier": "2467-359-963-6177-9585-1987-1228-8843",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707445,
 "tier": "2467-359-963-6177-9585-1987-41",
 "children": [
 {
 "start": 1526915707449,
 "tier": "2467-359-963-6177-9585-1987-41",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707453,
 "tier": "2467-359-963-6177-9585-1987-1491-5086-8309-6541-7994",
 "children": []
 }
 ]
 }
 ]
 },
 {
 "start": 1526915707793,
 "tier": "2467-359-963-7209",
 "children": [
 {
 "start": 1526915707795,
 "tier": "2467-359-963-7209",
 "children": []
 }
 ]
 },
 {
 "start": 1526915707815,
 "tier": "2467-359-3731",
 "children": [
 {
 "start": 1526915707818,
 "tier": "2467-359-3731",
 "children": []
 }
 ]
 }
 ]
 }
]
5 Comments
Share

Save

Give Award

100% Upvoted
Comment ascicada456

COMMENT

SORT BY

BEST


level 1
PM_ME_WEBDEV_TIPS
front-end
1 point
·
7 days ago
I'll post the solution later if someone was interested, but will leave some time before spoiling it.

Reply
Share
Report
Save
Give Award


level 2
gin_and_toxic
1 point
·
7 days ago
Isn't it just basically sorting and nesting?

My simple solution (probably not the fastest) would be:

Loop through each data and assign tier numbers by how many dashes

Sort the data by tier and start

Loop again and assign to new array/object. If same tier exists, put as a child of that, otherwise look for its parent.

Reply
Share
Report
Save
Give Award


level 1
PM_ME_WEBDEV_TIPS
front-end
1 point
·
6 days ago
here's my solution if anyone ever stumbled upon this:

var sorted = data.sort((a,b) => {
    if (a.tier === b.tier) {
        return a.start - b.start;
    } else if (a.tier.length === b.tier.length) {
        if (a.tier > b.tier) {
            return 1;
        } else {
            return -1;
        }
    } else {
        return a.tier.length - b.tier.length;
    }
}).map(element => {
    element.children = [];
    return element;
});
var tree = [];
sorted.forEach(element => {
    searchLevel(element, tree);
});

function searchLevel(element, level, levelTier) {
    if (level.length) {
        var found;
        level.forEach(branch => {
            if (element.tier.startsWith(branch.tier) && levelTier !== branch.tier) {
                found = true;
                searchLevel(element, branch.children, branch.tier);
            }
        });
        if (!found) {
            level.push(element);
        }
    } else {
        level.push(element);
    }
}

sortLevel(tree);

function sortLevel(childrenArray) {
    childrenArray = childrenArray.sort((a, b) => {
        return a.start - b.start;
    });
    childrenArray.forEach(child => {
        sortLevel(child.children);
    });
}
